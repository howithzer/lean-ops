openapi: "3.0.0"
info:
  title: Trades Topic Contract
  version: "3.0.0"
# Scenario 03 - NUCLEAR RESET
# v1 is shared/swagger_v1.yaml.
# This v3 has breaking changes:
#   - amount (DOUBLE) REMOVED
#   - currency (STRING) REMOVED
#   - notional_value added (different name, different semantic)
#   - instrument_type added as REQUIRED (existing records have no value)
# Expected result: PASS (nuclear override) - NUCLEAR_RESET
# CD preview: RENAME existing table to archive, CREATE TABLE with new schema

components:
  schemas:
    Trade:
      required:
        - trade_id
        - trader_name
        - trade_ts
        - instrument_type
      properties:
        trade_id:
          type: string
          description: "Unique identifier for the trade."
        trader_name:
          type: string
          description: "Full name of the executing trader."
        ssn:
          type: string
          description: "Trader SSN. SENSITIVE - SHA-256 hashed."
        credit_card:
          type: string
          description: "Credit card number. SENSITIVE - SHA-256 hashed."
        trade_ts:
          type: string
          format: date-time
          description: "ISO 8601 timestamp of trade execution."
        notional_value:
          type: number
          format: double
          description: "Replaces amount+currency. Value in USD."
        instrument_type:
          type: string
          description: "EQUITY, BOND, FX, DERIVATIVE. REQUIRED by new data model."
